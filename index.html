<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header class="site-header band band--dark">
        <!-- 유틸바 -->
        <div class="util-bar">
            <div class="inner">
                <nav class="util-left">
                    <a href="#">VIP LOUNGE</a>
                    <a href="#">멤버십</a>
                    <a href="#">고객센터</a>
                </nav>
                <nav class="util-right">
                    <a href="#">로그인</a>
                    <a href="#">회원가입</a>
                    <a href="#" class="fast">빠른예매</a>
                </nav>
            </div>
        </div>

        <!-- 메인 GNB -->
        <div class="gnb">
            <div class="inner">
                <!-- 좌측 아이콘 -->
                <div class="gnb-left">
                    <button class="icon-btn" aria-label="메뉴 열기">
                        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
                            <path d="M3 6h18M3 12h18M3 18h18" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                    <button class="icon-btn" aria-label="검색">
                        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
                            <circle cx="11" cy="11" r="7" fill="none" stroke="currentColor" stroke-width="2" />
                            <path d="M20 20l-3.5-3.5" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                </div>

                <!-- 중앙 메뉴 + 로고 -->
                <nav class="gnb-center">
                    <ul class="menu left">
                        <li><a href="#" class="on">영화</a></li>
                        <li><a href="#">예매</a></li>
                        <li><a href="#">극장</a></li>
                    </ul>

                    <!-- 가운데 로고: 이미지로 교체해서 사용 -->
                    <a href="/" class="brand-wrap" aria-label="CGV 홈">
                        <img class="brand" src="./images/logoRed.png" alt="CGV" />
                    </a>

                    <ul class="menu right">
                        <li><a href="#">이벤트</a></li>
                        <li><a href="#">스토어</a></li>
                        <li><a href="#">혜택</a></li>
                    </ul>
                </nav>

                <!-- 우측 아이콘 -->
                <div class="gnb-right">
                    <a class="icon-btn" href="#" aria-label="바코드/티켓">
                        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
                            <path d="M4 6h16v12H4zM7 8v8M10 8v8M14 8v8M17 8v8" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" />
                        </svg>
                    </a>
                    <a class="icon-btn" href="#" aria-label="내 정보">
                        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
                            <circle cx="12" cy="8" r="4" fill="none" stroke="currentColor" stroke-width="2" />
                            <path d="M4 20c1.5-3.5 5-6 8-6s6.5 2.5 8 6" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <section class="movie-wrap band band--dark">
        <div class="movie-section">
            <div class="movie-slider" data-per="4">
                <button class="nav prev" aria-label="이전">‹</button>

                <div class="viewport">
                    <ul class="track">
                        <!-- 카드 아이템들 -->
                        <li class="card">
                            <div class="poster">
                                <img src="./images/30000221_320.jpg" alt="어쩔수가없다">
                                <span class="rank">1</span>
                                <img class="age-badge" src="./images/ico_age_02.png" alt="15세 이상 관람가">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                     l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                     l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">3k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/89833_320.jpg" alt="귀멸의칼날">
                                <span class="rank">2</span>
                                <img class="age-badge" src="./images/ico_age_04.png" alt="전체 관람가">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">1.6k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/30000104_320.jpg" alt="얼굴">
                                <span class="rank">3</span>
                                <img class="age-badge" src="./images/ico_age_02.png" alt="15세">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">1.3k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/30000041_320.jpg" alt="살인자인터뷰">
                                <span class="rank">4</span>
                                <img class="age-badge" src="./images/ico_age_01.png" alt="19금">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">1.2k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/30000103401889_727.jpg" alt="체인쇼맨">
                                <span class="rank">5</span>
                                <img class="age-badge" src="./images/ico_age_02.png" alt="15">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">1k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/89676_320.jpg" alt="좀비딸">
                                <span class="rank">6</span>
                                <img class="age-badge" src="./images/ico_age_03.png" alt="12">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">0.75k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/30000183_320.jpg" alt="빌리브">
                                <span class="rank">7</span>
                                <img class="age-badge" src="./images/ico_age_03.png" alt="12">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">0.7k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>
                        <li class="card">
                            <div class="poster">
                                <img src="./images/30000115_320.jpg" alt="보스">
                                <span class="rank">8</span>
                                <img class="age-badge" src="./images/ico_age_02.png" alt="15">
                            </div>
                            <div class="meta">
                                <button class="like" type="button" aria-pressed="false">
                                    <!-- 비워진 하트 -->
                                    <svg class="icon-heart outline" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <!-- 채워진 하트 -->
                                    <svg class="icon-heart filled" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06
                                     a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23
                                    l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                                    </svg>

                                    <span class="count">0.2k</span>
                                </button>
                                <button class="btn-reserve" type="button">예매</button>
                            </div>
                        </li>

                        <!-- … 더 많은 카드들 … -->
                    </ul>
                </div>

                <button class="nav next" aria-label="다음">›</button>
            </div>
        </div>
    </section>
    <section class="scroll-cue-wrap band band--dark" aria-hidden="true">
        <div class="scroll-cue">
            <!-- 마우스 모양 아이콘 (SVG) -->
            <svg class="mouse" viewBox="0 0 24 36" width="24" height="36" role="img">
                <rect x="4" y="2" width="16" height="28" rx="8" ry="8" fill="none" stroke="currentColor"
                    stroke-width="2" />
                <circle class="wheel" cx="12" cy="9" r="2" fill="currentColor" />
            </svg>
        </div>
    </section>
    <section class="band  benefits">
        <div class="container">
            <div class="benefit-head">
                <h2>이벤트</h2>
                <a href="#" class="more">더보기 ›</a>
            </div>

            <div class="benefit-grid benefit-grid--2x2-tall">
                <!-- 좌상 -->
                <a href="#" class="tile small small-1">
                    <img src="./images/3ada4845f44445ec934ff55365f21966.jpg" alt="혜택 1">
                </a>
                <!-- 중앙상 -->
                <a href="#" class="tile small small-2">
                    <img src="./images/5142674b2ba9463a83e55b64382c2b4d.jpg" alt="혜택 2">
                </a>
                <!-- 좌하 -->
                <a href="#" class="tile small small-3">
                    <img src="./images/300edcf1f9e54d48a679464e10dc6691.jpg" alt="혜택 3">
                </a>
                <!-- 중앙하 -->
                <a href="#" class="tile small small-4">
                    <img src="./images//aba0d0506e1a406dbba0609dad9bc5cf.jpg" alt="혜택 4">
                </a>

                <a href="#" class="tile tall">
                    <picture>
                        <!-- 아이패드/태블릿 구간(예: 1024px 이하)에서는 가로형 이미지로 교체 -->
                        <source media="(max-width: 1024px)" srcset="./images/associate_3.jpg">
                        <!-- 기본: 데스크톱(세로형) -->
                        <img src="./images/250x310.jpeg" alt="프로모션">
                    </picture>
                </a>
            </div>
        </div>
    </section>

    <section class="band movie-img">
        <h2 class="cgv-main">특별관</h2>

        <ul class="cgv-list">
            <li><a href="#"><img src="./images/b4a0e81e844e43e080211d26a1684d1d.jpg" alt="Dolby Cinema"></a></li>
            <li><a href="#"><img src="./images/cbd56f2fe90d4603a02e0c6a946a2ce4.jpg" alt="Dolby Vision"></a></li>
            <li><a href="#"><img src="./images/edda522b68664416b08b9887a9d0a4c5.jpg" alt="Mega MX4D"></a></li>
            <li><a href="#"><img src="./images/d3b1b33ea0f24e27b6687f35b75cc128.jpg" alt="Mega LED"></a></li>
            <!-- <li><a href="#"><img src="./images/488b1ea133c2423da136212199c53aa4.png" alt="Boutique Private"></a></li> -->
        </ul>


    </section>


    <section class="band notice">
        <div class="notice-header">
            <h2>공지사항</h2>
            <a href="#" class="more">더보기 ›</a>
        </div>

        <!-- 한 줄만 보이는 롤러 -->
        <div class="notice-roller" aria-label="공지 롤링 목록">
            <ul class="notice-list">
                <li>
                    <span class="category">CGV</span>
                    <a href="#" class="title">[공지] (귀멸의 칼날-무한성편) 랜덤 일륜도 키링 Q&amp;A</a>
                    <span class="date">2025.09.18</span>
                </li>
                <li>
                    <span class="category">이벤트</span>
                    <a href="#" class="title">추석 연휴 이벤트 당첨자 발표</a>
                    <span class="date">2025.09.10</span>
                </li>
                <li>
                    <span class="category">극장</span>
                    <a href="#" class="title">○○지점 리뉴얼 공사 안내</a>
                    <span class="date">2025.09.03</span>
                </li>
            </ul>
        </div>
    </section>

    <ul class="info-icons">
        <li>
            <a href="#">
                <img src="./images/ico-main-customer.png" alt="">
                <span>고객센터</span>
            </a>
        </li>
        <li>
            <a href="#">
                <img src="./images/ico-main-faq.png" alt="">
                <span>자주 묻는 질문</span>
            </a>
        </li>
        <li>
            <a href="#">
                <img src="./images/ico-main-qna.png" alt="">
                <span>1:1 문의</span>
            </a>
        </li>
        <li>
            <a href="#">
                <img src="./images/ico-main-group.png" alt="">
                <span>단체/대관문의</span>
            </a>
        </li>
        <li>
            <a href="#">
                <img src="./images/ico-main-lost.png" alt="">
                <span>분실물 문의/접수</span>
            </a>
        </li>
        <li>
            <a href="#">
                <img src="./images/ico-main-boutique.png" alt="">
                <span>프라이빗 대관예매</span>
            </a>
        </li>
    </ul>

    <section class="footer-banner">
        <div class="f-banner">
            <a href=""><img src="./images/BrideoftheCovenant_9801802.jpg" alt=""></a>
        </div>

    </section>


    <footer>
        <div class="inner">
            <ul class="foot-menu">
                <li><a href="#void">회사소개</a></li>
                <li class="hide"><a href="#void">지속가능경영</a></li>
                <li class="hide"><a href="#void">IR</a></li>
                <li><a href="#void">채용정보</a></li>
                <li class="hide"><a href="#void">광고/제휴/출점문의</a></li>
                <li><a href="#void">이용약관</a></li>
                <li class="hide"><a href="#void">편성기준</a></li>
                <li><a href="#void">개인정보처리방침</a></li>
                <li class="hide"><a href="#void">법적고지</a></li>
                <li><a href="#void">이메일주소무단수집거부</a></li>
                <li class="hide"><a href="#void">윤리경영</a></li>
                <li class="hide"><a href="#void">사이버감사실</a></li>
            </ul>
            <div class="foot-bottom">
                <p class="foot-logo"><img src="./images/footer-logo.png" alt=""></p>
                <address>
                    <p>(04377)서울특별시 용산구 한강대로 23길 55, 아이파크몰 6층(한강로동)</p>
                    <p><span>대표이사 허민회 </span>
                        <span>사업자등록번호 104-81-45690</span>
                        <span>통신판매업신고번호: 2017-서울용산-0662 사업자정보확인</span>
                    </p>
                    <p><span>호스팅사업자: CJ올리브네트웍스 </span>
                        <span>개인정보보호 책임자: 도형구</span>
                        <span>대표이메일 cjcgvmaster@cj.net</span>
                    </p>
                    <p>© CJ CGV. All Rights Reserved</p>
                </address>
                <ul class="sns-list">
                    <li><a href="#void"><img src="./images/ico-youtubeN.png" alt=""></a></li>
                    <li><a href="#void"><img src="./images/ico-twitterN.png" alt=""></a></li>
                    <li><a href="#void"><img src="./images/ico-instagramN.png" alt=""></a></li>
                    <li><a href="#void"><img src="./images/ico-facebookN.png" alt=""></a></li>
                </ul>
            </div>
        </div>
    </footer>

</body>
<script>
    document.addEventListener('click', e => {
        if (e.target.closest('.like')) {
            const btn = e.target.closest('.like');
            btn.classList.toggle('active');
            // 접근성: aria-pressed 상태 변경
            const pressed = btn.classList.contains('active');
            btn.setAttribute('aria-pressed', pressed);
        }
    });

    (() => {
        const slider = document.querySelector('.movie-slider');
        if (!slider) return;

        const track = slider.querySelector('.track');
        const viewport = slider.querySelector('.viewport');
        const prevBtn = slider.querySelector('.nav.prev');
        const nextBtn = slider.querySelector('.nav.next');

        // 원본 카드 보존
        const originals = Array.from(track.children);
        let N = originals.length;      // 원본 카드 개수 (예: 8)
        if (N === 0) return;

        // 도우미
        const rs = () => getComputedStyle(document.documentElement);
        const gs = (el) => getComputedStyle(el);

        const getPer = () => {
            const v = parseInt(rs().getPropertyValue('--per'), 10);
            return Number.isFinite(v) && v > 0 ? v : 4;
        };
        const getGap = () => {
            const g = parseFloat(gs(track).gap || '0');
            return Number.isFinite(g) ? g : 0;
        };

        // 현재 논리 인덱스(0 ~ N-1) 추적
        let current = 0;

        // 클론을 다시 만들거나(리사이즈 등) 카드 basis를 재적용해야 할 때 쓰는 재설정 함수들
        function clearClones() {
            // 원본만 남기기
            const all = Array.from(track.children);
            all.forEach(node => node.remove());
            originals.forEach(node => track.appendChild(node));
        }

        function makeClones() {
            const per = getPer();
            // 앞뒤로 per개씩 복제 → 무한루프
            const prefix = originals.slice(-per).map(n => n.cloneNode(true));
            const suffix = originals.slice(0, per).map(n => n.cloneNode(true));

            prefix.forEach(n => track.insertBefore(n, track.firstChild));
            suffix.forEach(n => track.appendChild(n));
        }

        function cardWidth() {
            const per = getPer();
            const gap = getGap();
            const vw = viewport.clientWidth;          // 섹션(최대 1100px)의 실제 가로
            // per개 카드가 gap까지 포함해 딱 맞게
            return (vw - gap * (per - 1)) / per;
        }

        function applyCardBasis() {
            const basis = cardWidth();
            Array.from(track.children).forEach(li => {
                li.style.flex = `0 0 ${basis}px`;
            });
        }

        // 트랙 상에서 "페이지 인덱스" → 클론 포함 기준
        const step = () => Math.round(cardWidth() + getGap());

        function setScrollByLogicalIndex(idx, behavior = 'auto') {
            // 클론 앞쪽 per개가 있으므로, 시작점은 per 오프셋
            const per = getPer();
            const left = (per + idx) * step();
            track.scrollTo({ left, behavior });
        }

        // 현재 스크롤 위치를 "클론 포함 페이지 인덱스"로
        function currentPageIndex() {
            return Math.round(track.scrollLeft / step());
        }

        function normalizeAfterScroll() {
            // 스크롤이 클론 영역에 들어갔으면 같은 논리 위치로 점프
            const per = getPer();
            const totalPages = per + N + per;           // 전체(클론 포함) 페이지 수
            let page = currentPageIndex();

            // 클론 앞쪽으로 넘어감 → 뒤쪽 원본으로 점프
            if (page < per) {
                page += N;
                track.scrollTo({ left: page * step(), behavior: 'auto' });
            }
            // 클론 뒤쪽으로 넘어감 → 앞쪽 원본으로 점프
            else if (page >= per + N) {
                page -= N;
                track.scrollTo({ left: page * step(), behavior: 'auto' });
            }
            // 논리 인덱스 갱신 (원본 기준 0~N-1)
            current = (page - per + N) % N;
            updateButtons(); // 필요 시 disabled 상태 갱신
        }

        function scrollToNearestSnap(behavior = 'smooth') {
            const targetPage = currentPageIndex();
            track.scrollTo({ left: targetPage * step(), behavior });
        }

        // 버튼 활성/비활성: 무한루프에선 보통 둘 다 활성. (원하면 항상 활성)
        function updateButtons() {
            prevBtn.disabled = false;
            nextBtn.disabled = false;
        }

        // 한 칸씩 이동(무한루프)
        function go(dir = 1) {
            const per = getPer();
            current = (current + dir + N) % N;
            setScrollByLogicalIndex(current, 'smooth');
        }

        // 스크롤 이벤트: 끝나면 위치 정규화 + 스냅
        let scrollTimer;
        track.addEventListener('scroll', () => {
            clearTimeout(scrollTimer);
            scrollTimer = setTimeout(() => {
                // 가장 가까운 카드 경계로 스냅
                scrollToNearestSnap('smooth');
                // 스냅 후 클론 영역이면 자연 점프
                setTimeout(normalizeAfterScroll, 300);
            }, 80);
        }, { passive: true });

        prevBtn.addEventListener('click', () => go(-1));
        nextBtn.addEventListener('click', () => go(1));

        // 리사이즈 대응: 현재 논리 인덱스 유지한 채 재계산
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                // 클론 포함 상태에서 basis만 다시 적용해도 되지만
                // per 값이 바뀌면 클론 개수도 바뀌므로 안전하게 재구성
                clearClones();
                makeClones();
                applyCardBasis();
                setScrollByLogicalIndex(current, 'auto');
                updateButtons();
            }, 120);
        });

        // 초기화
        clearClones();
        makeClones();
        applyCardBasis();
        // 시작 위치: 원본 0번이 맨 왼쪽에 오도록(per만큼 오프셋)
        setScrollByLogicalIndex(current, 'auto');
        updateButtons();

        // 키보드(옵션)
        slider.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') go(-1);
            if (e.key === 'ArrowRight') go(1);
        });
    })();

    (function () {
        const roller = document.querySelector('.notice-roller');
        const list = roller.querySelector('.notice-list');
        const rowH = parseInt(getComputedStyle(roller).getPropertyValue('--row-h')) || roller.clientHeight;
        const DURATION = 500;   // 움직임 시간(ms)
        const INTERVAL = 2500;  // 대기 시간(ms)

        let timer;

        function tick() {
            // 한 칸 위로
            list.style.transition = `transform ${DURATION}ms ease`;
            list.style.transform = `translateY(-${rowH}px)`;
        }

        // 애니메이션 끝나면 첫 항목을 맨 뒤로 보내고 위치 리셋
        list.addEventListener('transitionend', () => {
            list.appendChild(list.firstElementChild);
            list.style.transition = 'none';
            list.style.transform = 'translateY(0)';
            // 강제 리플로우로 다음 transition 보장
            void list.offsetHeight;
        });

        function start() { stop(); timer = setInterval(tick, INTERVAL); }
        function stop() { if (timer) clearInterval(timer); }

        // 호버/포커스 시 일시정지
        roller.addEventListener('mouseenter', stop);
        roller.addEventListener('mouseleave', start);
        roller.addEventListener('focusin', stop);
        roller.addEventListener('focusout', start);

        start();
    })();
</script>


</html>